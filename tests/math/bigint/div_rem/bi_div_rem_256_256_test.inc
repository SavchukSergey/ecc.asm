include '../src/math/bigint/div_rem/bi_div_rem_256_256.inc'

__bi_div_rem_256_256_test:
virtual at rsp
.locals_start:
  .dividend_hex rq 1
  .divisor_hex rq 1
  .expected_quotient_hex rq 1
  .expected_remainder_hex rq 1
  .dividend rb __BIG_INTEGER_BYTES_256
  .divisor rb __BIG_INTEGER_BYTES_256
  .quotient rb __BIG_INTEGER_BYTES_256
  .remainder rb __BIG_INTEGER_BYTES_256
.locals_end:
end virtual
        enter   .locals_end - .locals_start, 0

        lea     rbx, [.cases]
.loop:        
        lea     rcx, [rbx]
        lea     rdx, [rbx + 64]
        lea     r8, [rbx + 128]
        lea     r9, [rbx + 192]

        push    rbx
        
        mov     [.dividend_hex], rcx
        mov     [.divisor_hex], rdx
        mov     [.expected_quotient_hex], r8
        mov     [.expected_remainder_hex], r9

        mov     rcx, [.dividend_hex]
        lea     rdx, [.dividend]
        call    bi_try_read_hex_256

        mov     rcx, [.divisor_hex]
        lea     rdx, [.divisor]
        call    bi_try_read_hex_256

        lea     rcx, [.dividend]
        lea     rdx, [.divisor]
        lea     r8, [.quotient]
        lea     r9, [.remainder]
        call    test_context_start_measure
        call    bi_div_rem_256_256
        call    test_context_end_measure

        mov     rcx, [.expected_quotient_hex]
        lea     rdx, [.quotient]
        call    bi_assert_equal_hex_256
        jc      .fail

        mov     rcx, [.expected_remainder_hex]
        lea     rdx, [.remainder]
        call    bi_assert_equal_hex_256
        jc      .fail

        pop     rbx
        add     rbx, 256
        cmp     rbx, .cases_end
        jb      .loop
.pass:
        leave
        clc
        ret
.fail:
        leave
        stc
        ret


.cases:
  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000000000000000000000000000000000000000000000000006'
  db '223d2bb3ad4647eb58fe9bbec7364ecaf8b3a977d6372d39805b3fc21efd0ffb'
  db '0000000000000000000000000000000000000000000000000000000000000003'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000000000000000000000000000000000000000000000006e'
  db '01de19a80e1b1b3212d160ee7a9340ce8fe49039bc8ea5603a3385ce144ef790'
  db '0000000000000000000000000000000000000000000000000000000000000005'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000000000000000006e3be8abd2e089ed812475be9b51c3cf'
  db '00000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7d2c3b'
  db '000000000000000000000000000000001294f2aac703fc89ac5cb7b3a05bab30'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfc'
  db '000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7d2c3'
  db '00000000000000000000000000000003695793f5df66c5c73c97cd45b78133f1'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc'
  db '0000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7d2c'
  db '00000000000000000000000000000017fe362e4bfa0c701003a88168ed800cd5'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1'
  db '00000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7d2'
  db '00000000000000000000000000000542cd006ad153eef7300f4314314acc0293'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a'
  db '000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7d'
  db '0000000000000000000000000000130a4a034253294fc68013c86dcbd858df33'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a0'
  db '0000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c7'
  db '0000000000000000000000000005ac151abcf7ba2a5f555a0e7650f2c9e63c85'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04'
  db '00000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1c'
  db '0000000000000000000000000035e64ae5e932822afcb026d66fca2154f18f75'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04f'
  db '000000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e1'
  db '0000000000000000000000000560b532f3cbb73a0894c8f6b1caaa93a70ac176'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fa'
  db '0000000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77e'
  db '0000000000000000000000000c4473bdb0f9bfc63dccd475baab3c9e29fcb6d9'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04faf'
  db '00000000000000000000000000000000000000001dd15d2c949aeda9ea5c7f77'
  db '000000000000000000000006138b2d2339414ac18e86cf458410050697fd848c'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa'
  db '000000000000000000000000000000000000000001dd15d2c949aeda9ea5c7f7'
  db '0000000000000000000000364dc0f84f7b7da2a9fbd7786d9af4db65b0e5e2af'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2'
  db '0000000000000000000000000000000000000000001dd15d2c949aeda9ea5c7f'
  db '000000000000000000000339f11dab139f432131fad40bf27e26541f13340687'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2d'
  db '00000000000000000000000000000000000000000001dd15d2c949aeda9ea5c7'
  db '000000000000000000006a921b3ec0c62091ca44291e8373718065965dd0e5ea'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2dd'
  db '000000000000000000000000000000000000000000001dd15d2c949aeda9ea5c'
  db '000000000000000000036e3577f184e9e610524361533f0e10eb6e6e6f0cd679'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb'
  db '0000000000000000000000000000000000000000000001dd15d2c949aeda9ea5'
  db '000000000000000000561b23f8cfad5158312d9bb047a7e0fcb5dbc7a7e3a7be'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6'
  db '00000000000000000000000000000000000000000000001dd15d2c949aeda9ea'
  db '0000000000000000027d46af53ee1002fbb6e3e86950400123835264ed349189'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6c'
  db '000000000000000000000000000000000000000000000001dd15d2c949aeda9e'
  db '00000000000000004762b81ab7ba66376c6dad7f8a635a4ca60db412555efb3d'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca'
  db '0000000000000000000000000000000000000000000000001dd15d2c949aeda9'
  db '00000000000000064ea971804001f1347c6c1dec08dc0fa8a54c560e35d3b28b'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6'
  db '00000000000000000000000000000000000000000000000001dd15d2c949aeda'
  db '0000000000000044505c5226de4f86cd20ee592366da348b68c0a04a37e50689'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca68'
  db '000000000000000000000000000000000000000000000000001dd15d2c949aed'
  db '0000000000000492a7730863a3b2cdd88d87cb34988052846c03e3269dd26d9d'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca686'
  db '0000000000000000000000000000000000000000000000000001dd15d2c949ae'
  db '0000000000005e23547ea3ba13c3c6c62d32a9670799285990049fe8ef62fad1'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869'
  db '00000000000000000000000000000000000000000000000000001dd15d2c949a'
  db '000000000006656a0de42c019ec0d6c49d9f27dfbcf651c5d5bd420ea8c2dcbb'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869b'
  db '000000000000000000000000000000000000000000000000000001dd15d2c949'
  db '00000000004b4adb7947f857d3318d8e34c03afa1ed5e208f2998a37dc9c4ab2'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf'
  db '0000000000000000000000000000000000000000000000000000001dd15d2c94'
  db '00000000042b660983b1dd312cbbd5b1e8361adc6d02cc35c565252f6a016979'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf2'
  db '00000000000000000000000000000000000000000000000000000001dd15d2c9'
  db '000000001fba60347869ffac8d04f3218f0a8bd060094d7483f09c06d9776ae3'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf27'
  db '000000000000000000000000000000000000000000000000000000001dd15d2c'
  db '00000003ffd58e3ee24ed906174d16d504ea6e1e8cf37a474f8d52d7e3795a31'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf272'
  db '0000000000000000000000000000000000000000000000000000000001dd15d2'
  db '00000056acc40f1d0ab64b26f2a565c9823d49f7a0773682f1f1e454c4b42461'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '000006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf2727'
  db '00000000000000000000000000000000000000000000000000000000001dd15d'
  db '00000133249566c2cbca26293b90e30025c4e98fd4812c774da8bda1d11b4fba'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '00006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf27271'
  db '000000000000000000000000000000000000000000000000000000000001dd15'
  db '00005ac3d1a102193bdb1f16db3bc13294ddbf64f88d17bc8ff104ef2fce6fa0'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '0006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf272715'
  db '0000000000000000000000000000000000000000000000000000000000001dd1'
  db '000281ef5cfc207bed7ea4cd27f4c9cb67ecbbe71173faa1d91045903b8a16c0'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '006e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf2727154'
  db '00000000000000000000000000000000000000000000000000000000000001dd'
  db '000965ade7b94e848c56b71483de7ee7a4e97d8761239d7f8fdaadf9fab13661'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '06e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf27271548'
  db '000000000000000000000000000000000000000000000000000000000000001d'
  db '05a2707ea16eb5859be5910f31c1a5d93246cfc81fd7f1a4144f83e54a80f6bd'


  db 'cd6f06360fa5af8415f7a678ab45d8c1d435f8cf054b0f5902237e8cb9ee5fe5'
  db '6e3be8abd2e089ed812475be9b51c3cfcc1a04fafa2ddb6ca6869bf272715487'
  db '0000000000000000000000000000000000000000000000000000000000000001'
  db '5f331d8a3cc5259694d330ba0ff414f2081bf3d40b1d33ec5b9ce29a477d0b5e'
.cases_end:

